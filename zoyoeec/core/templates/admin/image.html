{% extends "gbase.html" %}
{% load hash_filters %}

{% block head %}
  <div class="panel-default panel"> 
    <div class="panel-heading">
      <h6 class="panel-title">Manage Image</h6>
      <a class='pull-right btn btn-default btn-sm' href='/admin/item/{{ITEM.parent.name}}/{{ITEM.key.id}}/'><i class="fa fa-arrow-circle-left"></i>back to item</a>
    </div>
    <div class="panel-body">
       <div class="col-lg-3 col-md-12 col-sm-12">
          <div class="widget" id='image-load'>
              <div class="thumbnail">
                  <div class="thumb">
                      <img src='/admin/fetchimage/{{ITEM.parent.name}}/{{ITEM.key.id}}/0/'></img>
                  </div>
                  <div class="caption" >
                      <h6>{{ITEM.name}}</h6>
                        <div class="progress widget-inner">
                            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                            </div>
                        </div>
         <form action="{{BLOBURL}}" method='POST' enctype="multipart/form-data">
         {% csrf_token %}
         <input class='file' name='image' type="file" accept="image/*;capture=camera">
         </form>
                  </div>
                  <div class="caption">
                    <button class="btn btn-default btn-icon" onclick="zoyoe.image.rotate('{{ITEM.parent.name}}','{{ITEM.key.id}}',0,'#image-load')"><i class="fa fa-rotate-right"></i></button>
                  </div>
              </div>
          </div>
       </div>
       <div class="col-lg-3 col-md-12 col-sm-12">
          <div class="widget" id="image-load-1">
              <div class="thumbnail">
                  <div class="thumb">
                      <img src='/admin/fetchimage/{{ITEM.parent.name}}/{{ITEM.key.id}}/1/'></img>
                  </div>
                  <div class="caption">
                      <h6>{{ITEM.name}}</h6>
                      <div class="progress widget-inner">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                      </div>
                      <form action="{{BLOBURL1}}" method='POST' enctype="multipart/form-data">
                        {% csrf_token %}
                        <input class='file' name='image' type="file" accept="image/*;capture=camera">
                      </form>
                  </div>
                  <div class="caption">
                    <button class="btn btn-default btn-icon" onclick="zoyoe.image.rotate('{{ITEM.parent.name}}','{{ITEM.key.id}}',1,'#image-load-1')"><i class="fa fa-rotate-right"></i></button>
                  </div>
              </div>
          </div>
       </div>
       <div class="col-lg-3 col-md-12 col-sm-12">
          <div class="widget" id="image-load-2">
              <div class="thumbnail">
                  <div class="thumb">
                      <img src='/admin/fetchimage/{{ITEM.parent.name}}/{{ITEM.key.id}}/2/'></img>
                  </div>
                  <div class="caption" >
                      <h6>{{ITEM.name}}</h6>
                      <div class="progress widget-inner">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                      </div>
                      <form action="{{BLOBURL2}}" method='POST' enctype="multipart/form-data">
                      {% csrf_token %}
                        <input class='file' name='image' type="file" accept="image/*;capture=camera">
                      </form>
                  </div>
                  <div class="caption">
                    <button class="btn btn-default btn-icon" onclick="zoyoe.image.rotate('{{ITEM.parent.name}}','{{ITEM.key.id}}',2,'#image-load-2')"><i class="fa fa-rotate-right"></i></button>
                  </div>

              </div>
          </div>
       </div>
       <div class="col-lg-3 col-md-12 col-sm-12">
          <div class="widget" id="image-load-3">
              <div class="thumbnail">
                  <div class="thumb">
                      <img src='/admin/fetchimage/{{ITEM.parent.name}}/{{ITEM.key.id}}/3/'></img>
                  </div>
                  <div class="caption" >
                      <h6>{{ITEM.name}}</h6>
                      <div class="progress widget-inner">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                      </div>
                      <form action="{{BLOBURL3}}" method='POST' enctype="multipart/form-data">
                      {% csrf_token %}
                        <input class='file' name='image' type="file" accept="image/*;capture=camera">
                      </form>
                  </div>
                  <div class="caption">
                    <button class="btn btn-default btn-icon" onclick="zoyoe.image.rotate('{{ITEM.parent.name}}','{{ITEM.key.id}}',3,'#image-load-3')"><i class="fa fa-rotate-right"></i></button>
                  </div>

              </div>
          </div>
       </div>

    </div>
  </div>

{% endblock %}

{% block title %}
  <h5><i class="fa fa-bars"></i> {{ITEM.name}} <small>{{ITEM.category}}</small></h5>
  <div class="btn-group">
    <a href="#" class="btn btn-link btn-lg btn-icon dropdown-toggle" data-toggle="dropdown"><i class="fa fa-cogs"></i><span class="caret"></span></a>
    <ul class="dropdown-menu dropdown-menu-right">
      <li><a href="#">View in Ebay</a></li>
    </ul>
  </div>
{% endblock %}



{% block subsidebar %}
{% endblock%}

{% block dialogfirst %}
<script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/9.5.7/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="/static/jslib/load-image.all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/9.5.7/jquery.fileupload.js"></script>
<!-- The File Upload processing plugin -->
<script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/9.5.7/jquery.fileupload-process.js"></script>
<!-- The File Upload image preview & resize plugin -->
<script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/9.5.7/jquery.fileupload-image.js"></script>
<script>
$(function () {
  $("#image-load input").fileupload({
    done:function(e,data){
      var src = $('#image-load img').attr('src');
      $('#image-load img').attr('src', src+"?rand="+Math.random());
    },
    disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator && navigator.userAgent),
    progressall: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $('#image-load .progress-bar').css(
            'width',
            progress + '%'
        );
    }
  });

  $("#image-load-1 input").fileupload({
    done:function(e,data){
      var src = $('#image-load-1 img').attr('src');
      $('#image-load-1 img').attr('src', src+"&rand="+Math.random());
    },
    disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator && navigator.userAgent),
    progressall: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $('#image-load-1 .progress-bar').css(
            'width',
            progress + '%'
        );
    }
  });
  $("#image-load-2 input").fileupload({
    done:function(e,data){
        var src = $('#image-load-2 img').attr('src');
        $('#image-load-2 img').attr('src', src+"&rand="+Math.random());
    },
    disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator && navigator.userAgent),
    progressall: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $('#image-load-2 .progress-bar').css(
            'width',
            progress + '%'
        );
    }
  });
  $("#image-load-3 input").fileupload({
    done:function(e,data){
        var src = $('#image-load-3 img').attr('src');
        $('#image-load-3 img').attr('src', src+"&rand="+Math.random());
    },
    disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator && navigator.userAgent),
    progressall: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $('#image-load-3 .progress-bar').css(
            'width',
            progress + '%'
        );
    }
  });
});
</script>
{% endblock %}

{% block extracss %}
<link href="http://hayageek.github.io/jQuery-Upload-File/uploadfile.min.css" rel="stylesheet">
{% endblock %}

