{% load hash_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>zoyoe</title>

    <!--IE Compatibility modes-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!--Mobile first-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://fonts.googleapis.com/css?family=Cuprum" rel="stylesheet" type="text/css">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/static/bucketadmin/bs3/css/bootstrap.min.css">

    {% block extracss %}
    {% endblock %}
     <!-- Font Awesome -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
    <link href="/static/bucketadmin/css/style.css" rel="stylesheet">

</head>

  <body  ng-app="createWorkSpaceApp" ng-controller="createWorkSpaceController" class="login-body">

    <div class="container">

      <form id="cwsform" method="POST" name="cwsform" class="form-signin" ng-submit="submitForm(cwsform)" novalidate>
        <h2 class="form-signin-heading">create work space</h2>
        <div class="login-wrap">
            <div class="user-login-info">
                {% csrf_token %}
                {% if FORM %}{% include "zoyoe/formhint.thingy" with field=FORM.name %}{% endif %}
                <input name="name" type="text" class="form-control" placeholder="workspace name" autofocus required/>

                {% if FORM %}{% include "zoyoe/formhint.thingy" with field=FORM.email %}{% endif %}
                <input name="email" ng-model="email" type="text" class="form-control" placeholder="admin account email" required ng-pattern="/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/">

                {% if FORM %}{% include "zoyoe/formhint.thingy" with field=FORM.password%}{% endif %}
                <input name="password" ng-model="password" type="password" ng-minlength="3" ng-maxlength="8" class="form-control" placeholder="Password" required>
                <input name="passowrdcheck" ng-model="passwordcheck" type="password" data-password-check="password" class="form-control" required placeholder="Confirm Password">
            </div>
            <label class="checkbox">
                <input type="checkbox" value="accept"/>I accept the terms and conditions of use
            </label>
            <button class="btn btn-lg btn-login btn-block" type="submit">Create</button>

            <div class="registration">
                <a class="" href="registration.html">
                   sign up
                </a>
            </div>
        </div>
      </form>

    </div>



    <!-- Placed js at the end of the document so the pages load faster -->

    <!--Core js-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="/static/bucketadmin/bs3/js/bootstrap.min.js"></script>
    <script src="/static/bucketadmin/js/scripts.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script>
      var createWorkSpaceApp = angular.module('createWorkSpaceApp', []);
      createWorkSpaceApp.directive("passwordCheck", function() {
        return {
          require: "ngModel",
          scope: {
            passwordCheck: '='
          },
          link: function(scope, element, attrs, ctrl) {
            scope.$watch(function() {
              var combined;

              if (scope.passwordCheck || ctrl.$viewValue) {
                combined = scope.passwordCheck+ '_' + ctrl.$viewValue; 
              }                    
              return combined;
            }, function(value) {
              if (value) {
                ctrl.$parsers.unshift(function(viewValue) {
                    var origin = scope.passwordCheck;
                    if (origin !== viewValue) {
                        ctrl.$setValidity("passwordCheck", false);
                        return undefined;
                    } else {
                        ctrl.$setValidity("passwordCheck", true);
                        return viewValue;
                    }
                });
              }
            });
          }
        };
      });
      createWorkSpaceApp.controller('createWorkSpaceController', function($scope) {
        $scope.submitForm = function(cwsform) {
          if (cwsform.$valid) {
              var form = document.getElementById("cwsform");
              form.action = "/createworkspace/";
              form.submit();
          }else{
          }
        };
      });
    </script>
  </body>
</html>
